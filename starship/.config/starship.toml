# ============================================================================
# Starship Prompt Configuration - Optimized & Enhanced
# ============================================================================
# Docs: https://starship.rs/config/
# Presets: https://starship.rs/presets/

"$schema" = 'https://starship.rs/config-schema.json'

# ============================================================================
# Global Settings
# ============================================================================

# Add blank line between prompts for better readability
add_newline = true

# Performance settings (optimized for speed)
scan_timeout = 10        # Reduced from 30ms for faster rendering
command_timeout = 500

# ============================================================================
# Prompt Format
# ============================================================================

# Main prompt (left side)
format = """
[‚îè](bold green)\
$os\
$username\
$hostname\
$localip\
$shlvl\
$directory\
$git_branch\
$git_commit\
$git_state\
$git_metrics\
$git_status\
$docker_context\
$package\
$c\
$cmake\
$golang\
$helm\
$java\
$kotlin\
$gradle\
$nodejs\
$php\
$python\
$ruby\
$rust\
$terraform\
$nix_shell\
$conda\
$memory_usage\
$aws\
$gcloud\
$kubernetes\
$fill\
$cmd_duration\
$jobs\
$battery\
$time\
$status\
$container\
$shell\
$line_break\
[‚îó](bold green)$character"""

# Right-side prompt (disabled for cleaner look)
right_format = ""

# Continuation prompt
continuation_prompt = "[‚ñ∂‚ñ∂](bold green) "

# ============================================================================
# Line Break
# ============================================================================
[line_break]
disabled = false

# ============================================================================
# Fill - Push right-aligned content
# ============================================================================
[fill]
symbol = " "

# ============================================================================
# OS Icon
# ============================================================================
[os]
disabled = false
style = "bold white"

[os.symbols]
Alpine = " "
Amazon = " "
Android = " "
Arch = " "
CentOS = " "
Debian = " "
Fedora = " "
Linux = " "
Macos = " "
Manjaro = " "
Mint = " "
NixOS = " "
openSUSE = " "
Raspbian = " "
Redhat = " "
RedHatEnterprise = " "
Ubuntu = " "
Unknown = " "
Windows = " "

# ============================================================================
# Character (Prompt Symbol)
# ============================================================================
[character]
success_symbol = "[‚ùØ](bold green)"
error_symbol = "[‚ùØ](bold red)"
vimcmd_symbol = "[‚ùÆ](bold green)"
vimcmd_visual_symbol = "[‚ùÆ](bold yellow)"
vimcmd_replace_symbol = "[‚ùÆ](bold purple)"
vimcmd_replace_one_symbol = "[‚ùÆ](bold purple)"

# ============================================================================
# Username
# ============================================================================
[username]
style_user = "bold yellow"
style_root = "bold red"
format = "[ $user]($style)"
disabled = false
show_always = false  # Only show in SSH or if root

# ============================================================================
# Hostname
# ============================================================================
[hostname]
ssh_only = false  # Show machine name always
ssh_symbol = " "
trim_at = "."
format = "[Û∞å¢ $hostname]($style) "
style = "bold dimmed green"
disabled = false

# ============================================================================
# Directory
# ============================================================================
[directory]
style = "bold cyan"
truncation_length = 4
truncate_to_repo = true
truncation_symbol = "‚Ä¶/"
home_symbol = " ~"
read_only = " Û∞åæ"
read_only_style = "bold red"
format = "[ $path]($style)[$read_only]($read_only_style) "

# Advanced path substitution
[directory.substitutions]
"Documents" = "Û∞àô "
"Downloads" = " "
"Music" = "Û∞ùö "
"Pictures" = " "
"Videos" = " "
"Projects" = "Û∞≤ã "
"dotfiles" = " "
".config" = " "
"Desktop" = "Û∞öù "
"Development" = " "
"dev" = " "
"work" = "Û∞ÑÑ "

# ============================================================================
# Git Branch
# ============================================================================
[git_branch]
symbol = " "
style = "bold purple"
truncation_length = 25
truncation_symbol = "‚Ä¶"
only_attached = false
always_show_remote = false
format = "on [$symbol$branch(:$remote_branch)]($style) "

# ============================================================================
# Git Commit
# ============================================================================
[git_commit]
commit_hash_length = 7
format = "[\\($hash$tag\\)]($style) "
style = "bold green"
only_detached = true
disabled = false
tag_symbol = " üè∑  "
tag_disabled = false

# ============================================================================
# Git Status
# ============================================================================
[git_status]
style = "bold red"
disabled = false
format = '([$all_status$ahead_behind]($style) )'
conflicted = "‚öîÔ∏è "
ahead = "‚á°${count} "
behind = "‚á£${count} "
diverged = "‚áï‚á°${ahead_count}‚á£${behind_count} "
untracked = "?${count} "
stashed = "üì¶${count} "
modified = "!${count} "
staged = "+${count} "
renamed = "¬ª${count} "
deleted = "‚úò${count} "
typechanged = ""

# ============================================================================
# Git Metrics (lines added/removed)
# ============================================================================
[git_metrics]
disabled = false
added_style = "bold green"
deleted_style = "bold red"
only_nonzero_diffs = true
format = '([+$added]($added_style) )([-$deleted]($deleted_style) )'
ignore_submodules = false

# ============================================================================
# Git State (rebase, merge, etc)
# ============================================================================
[git_state]
format = '[\[$state($progress_current/$progress_total)\]]($style) '
style = "bold yellow"
rebase = "REBASING"
merge = "MERGING"
revert = "REVERTING"
cherry_pick = "CHERRY-PICKING"
bisect = "BISECTING"
am = "AM"
am_or_rebase = "AM/REBASE"

# ============================================================================
# Package Version
# ============================================================================
[package]
symbol = "Û∞èó "
style = "bold 208"
format = "is [$symbol$version]($style) "
display_private = false
disabled = false

# ============================================================================
# Command Duration
# ============================================================================
[cmd_duration]
min_time = 1_000          # Show for commands > 1s
style = "bold yellow"
format = "took [$duration]($style) "
show_milliseconds = false
show_notifications = false
min_time_to_notify = 45_000

# ============================================================================
# Time
# ============================================================================
[time]
disabled = false
time_format = "%R"       # 24h format (HH:MM)
style = "bold dimmed white"
format = "[$time]($style) "
use_12hr = false

# ============================================================================
# Status (exit code)
# ============================================================================
[status]
style = "bold red"
symbol = "‚úñ"
success_symbol = ""
not_executable_symbol = "üö´ "
not_found_symbol = "üîç "
sigint_symbol = "üß± "
signal_symbol = "‚ö° "
format = '[\[$symbol$status\]]($style) '
map_symbol = true
disabled = false
pipestatus = true
pipestatus_separator = "|"
pipestatus_format = '\[$pipestatus\] => [$symbol$common_meaning$signal_name$maybe_int]($style) '

# ============================================================================
# Jobs (background processes)
# ============================================================================
[jobs]
symbol = " "
style = "bold blue"
number_threshold = 1
symbol_threshold = 1
format = "[$symbol$number]($style) "

# ============================================================================
# Battery
# ============================================================================
[battery]
full_symbol = "Û∞Åπ "
charging_symbol = "Û∞ÇÑ "
discharging_symbol = "Û∞ÇÉ "
unknown_symbol = "Û∞ÅΩ "
empty_symbol = "Û∞Çé "
disabled = false  # Enable on laptops
format = "[$symbol$percentage]($style) "

[[battery.display]]
threshold = 10
style = "bold red"
discharging_symbol = "Û∞Çé "

[[battery.display]]
threshold = 30
style = "bold yellow"
discharging_symbol = "Û∞Å∫ "

[[battery.display]]
threshold = 50
style = "bold dimmed yellow"
discharging_symbol = "Û∞Åæ "

[[battery.display]]
threshold = 100
style = "bold green"
discharging_symbol = "Û∞Åπ "

# ============================================================================
# Memory Usage
# ============================================================================
[memory_usage]
disabled = true   # Enable if you want to see RAM usage
threshold = 75
symbol = "Û∞çõ "
style = "bold dimmed white"
format = "via $symbol[$ram( | $swap)]($style) "

# ============================================================================
# Shell Level (nested shells)
# ============================================================================
[shlvl]
disabled = false
threshold = 2
symbol = "Û∞ò¶ "
repeat = true
style = "bold yellow"
format = "[$symbol$shlvl]($style) "

# ============================================================================
# Container (Docker/Podman)
# ============================================================================
[container]
symbol = "‚¨¢ "
style = "bold red dimmed"
format = '[$symbol \[$name\]]($style) '
disabled = false

# ============================================================================
# Shell
# ============================================================================
[shell]
disabled = true  # Usually not needed
bash_indicator = "bash"
fish_indicator = "fish"
zsh_indicator = "zsh"
powershell_indicator = "psh"
format = "[$indicator]($style) "
style = "cyan bold"

# ============================================================================
# Programming Languages
# ============================================================================

# Rust
[rust]
symbol = " "
style = "bold red"
format = "via [$symbol($version )]($style)"
disabled = false
detect_extensions = ["rs"]
detect_files = ["Cargo.toml"]

# Python
[python]
symbol = " "
style = "bold yellow"
format = 'via [${symbol}${pyenv_prefix}(${version} )(\($virtualenv\) )]($style)'
pyenv_version_name = false
pyenv_prefix = "pyenv "
python_binary = ["python3", "python", "python2"]
detect_extensions = ["py"]
detect_files = [".python-version", "Pipfile", "pyproject.toml", "requirements.txt", "setup.py", "tox.ini", "pyrightconfig.json"]
detect_folders = []
disabled = false

# Node.js
[nodejs]
symbol = " "
style = "bold green"
format = "via [$symbol($version )]($style)"
not_capable_style = "bold red"
detect_extensions = ["js", "mjs", "cjs", "ts", "mts", "cts"]
detect_files = ["package.json", ".node-version", ".nvmrc"]
detect_folders = ["node_modules"]
disabled = false

# Go
[golang]
symbol = " "
style = "bold cyan"
format = "via [$symbol($version )]($style)"
detect_extensions = ["go"]
detect_files = ["go.mod", "go.sum", "go.work", "glide.yaml", "Gopkg.yml", "Gopkg.lock", ".go-version"]
detect_folders = ["Godeps"]
disabled = false

# Java
[java]
symbol = " "
style = "bold red"
format = "via [$symbol($version )]($style)"
detect_extensions = ["java", "class", "jar", "gradle", "clj", "cljc"]
detect_files = ["pom.xml", "build.gradle.kts", "build.sbt", ".java-version", "deps.edn", "project.clj", "build.boot", ".sdkmanrc"]
disabled = false

# PHP
[php]
symbol = " "
style = "bold blue"
format = "via [$symbol($version )]($style)"
detect_extensions = ["php"]
detect_files = ["composer.json", ".php-version"]
disabled = false

# Ruby
[ruby]
symbol = " "
style = "bold red"
format = "via [$symbol($version )]($style)"
detect_extensions = ["rb"]
detect_files = ["Gemfile", ".ruby-version"]
detect_folders = []
disabled = false

# C
[c]
symbol = " "
style = "bold blue"
format = "via [$symbol($version(-$name) )]($style)"
detect_extensions = ["c", "h"]
commands = [["cc", "--version"], ["gcc", "--version"], ["clang", "--version"]]
disabled = false

# CMake
[cmake]
symbol = "‚ñ≥ "
style = "bold blue"
format = "via [$symbol($version )]($style)"
detect_extensions = []
detect_files = ["CMakeLists.txt", "CMakeCache.txt"]
disabled = false

# Kotlin
[kotlin]
symbol = " "
style = "bold blue"
format = "via [$symbol($version )]($style)"
kotlin_binary = "kotlin"
detect_extensions = ["kt", "kts"]
disabled = false

# Gradle
[gradle]
symbol = " "
style = "bold cyan"
format = "via [$symbol($version )]($style)"
detect_extensions = ["gradle", "gradle.kts"]
disabled = false

# Helm
[helm]
symbol = "‚éà "
style = "bold white"
format = "via [$symbol($version )]($style)"
detect_extensions = []
detect_files = ["helmfile.yaml", "Chart.yaml"]
disabled = false

# Terraform
[terraform]
symbol = "Û±Å¢ "
style = "bold purple"
format = "via [$symbol$workspace ]($style)"
detect_extensions = ["tf", "tfplan", "tfstate"]
detect_files = []
disabled = false

# Nix Shell
[nix_shell]
symbol = " "
style = "bold blue"
format = 'via [$symbol$state( \($name\))]($style) '
impure_msg = '[impure](bold red)'
pure_msg = '[pure](bold green)'
unknown_msg = '[unknown](bold yellow)'
disabled = false

# Conda
[conda]
symbol = " "
style = "bold green"
format = "via [$symbol$environment]($style) "
ignore_base = true
disabled = false

# ============================================================================
# Docker
# ============================================================================
[docker_context]
symbol = " "
style = "bold blue"
format = "via [$symbol$context]($style) "
only_with_files = true
detect_extensions = []
detect_files = ["docker-compose.yml", "docker-compose.yaml", "Dockerfile"]
detect_folders = []
disabled = false

# ============================================================================
# Kubernetes
# ============================================================================
[kubernetes]
symbol = "‚ò∏ "
style = "bold blue"
format = 'on [$symbol$context( \($namespace\))]($style) '
disabled = true  # Enable if you use kubectl
detect_extensions = ["yaml", "yml"]
detect_files = ["k8s"]

[kubernetes.context_aliases]
"dev.local.cluster.k8s" = "dev"
"gke_.*_(?P<var_cluster>[\\w-]+)" = "gke-$var_cluster"

# ============================================================================
# Cloud Providers
# ============================================================================

# AWS
[aws]
symbol = " "
style = "bold yellow"
format = 'on [$symbol($profile )(\($region\) )(\[$duration\] )]($style)'
disabled = false
force_display = false

[aws.region_aliases]
us-east-1 = "use1"
us-east-2 = "use2"
us-west-1 = "usw1"
us-west-2 = "usw2"
eu-west-1 = "euw1"
eu-central-1 = "euc1"
ap-southeast-1 = "apse1"
ap-southeast-2 = "apse2"

# Google Cloud
[gcloud]
symbol = "Û±á∂ "
style = "bold blue"
format = 'on [$symbol$account(@$domain)(\($region\))]($style) '
disabled = false

[gcloud.region_aliases]
us-central1 = "uc1"
us-east1 = "ue1"
us-west1 = "uw1"
europe-west1 = "ew1"
asia-southeast1 = "as1"

# Azure
[azure]
symbol = "Û∞†Ö "
style = "bold blue"
format = "on [$symbol($subscription)]($style) "
disabled = false

# ============================================================================
# Local IP
# ============================================================================
[localip]
ssh_only = false  # Show local IP always
format = "[ $localipv4]($style) "
style = "bold yellow"
disabled = false

# ============================================================================
# Custom Commands
# ============================================================================

# Show if in devcontainer
[custom.devcontainer]
command = "echo 'devcontainer'"
when = 'test -f /.dockerenv'
symbol = "üì¶ "
style = "bold blue"
format = "[$symbol$output]($style) "
disabled = true

# Show if using direnv
[custom.direnv]
command = "echo 'direnv'"
when = 'test -n "$DIRENV_DIR"'
symbol = "üìÅ "
style = "bold yellow"
format = "[$symbol]($style) "
disabled = true
